(function(a){a.fn.countdown=function(c,e){thisEl=a(this);var d={date:null,format:null};if(c){a.extend(d,c)}function b(){eventDate=Date.parse(d.date)/1000;currentDate=Math.floor(a.now()/1000);if(eventDate<=currentDate){e.call(this);clearInterval(interval)}seconds=eventDate-currentDate;days=Math.floor(seconds/(60*60*24));seconds-=days*60*60*24;hours=Math.floor(seconds/(60*60));seconds-=hours*60*60;minutes=Math.floor(seconds/60);seconds-=minutes*60;if(days==1){thisEl.find(".timeRefDays").text("Day")}else{thisEl.find(".timeRefDays").text("Days")}if(hours==1){thisEl.find(".timeRefHours").text("Hour")}else{thisEl.find(".timeRefHours").text("Hours")}if(minutes==1){thisEl.find(".timeRefMinutes").text("Min")}else{thisEl.find(".timeRefMinutes").text("Min")}if(seconds==1){thisEl.find(".timeRefSeconds").text("Sec")}else{thisEl.find(".timeRefSeconds").text("Sec")}if(d.format=="on"){days=(String(days).length>=2)?days:"0"+days;hours=(String(hours).length>=2)?hours:"0"+hours;minutes=(String(minutes).length>=2)?minutes:"0"+minutes;seconds=(String(seconds).length>=2)?seconds:"0"+seconds}if(!isNaN(eventDate)){thisEl.find(".days").text(days);thisEl.find(".hours").text(hours);thisEl.find(".minutes").text(minutes);thisEl.find(".seconds").text(seconds)}else{alert("Invalid date. Here's an example: 12 Tuesday 2012 17:30:00");clearInterval(interval)}}b();interval=setInterval(b,1000)}})(jQuery);